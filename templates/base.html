<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% if article and article.summary %}
    <meta name="description" content="{{ article.summary|striptags }}">
    {% elif page and page.summary %}
    <meta name="description" content="{{ page.summary|striptags }}">
    {% else %}
    <meta name="description" content="{{ DESCRIPTION }}">
    {% endif %}
    <meta name="author" content="{{ AUTHOR }}">

    {% if article %}
    <title>{{ article.title }} | {{ SITENAME }}</title>
    <link rel="canonical" href="{{ SITEURL }}/{{ article.url }}">
    {% elif page %}
    <title>{{ page.title }} | {{ SITENAME }}</title>
    <link rel="canonical" href="{{ SITEURL }}/{{ page.url }}">
    {% else %}
    <title>{{ SITENAME }} - Winter Ski Traverse Adventures</title>
    <link rel="canonical" href="{{ SITEURL }}/">
    {% endif %}

    <!-- OpenGraph tags -->
    <meta property="og:site_name" content="{{ SITENAME }}">
    {% if article %}
    <meta property="og:type" content="article">
    <meta property="og:title" content="{{ article.title }}">
    <meta property="og:url" content="{{ SITEURL }}/{{ article.url }}">
    <meta property="og:description" content="{{ article.summary|striptags if article.summary else DESCRIPTION }}">
    {% elif page %}
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ page.title }}">
    <meta property="og:url" content="{{ SITEURL }}/{{ page.url }}">
    <meta property="og:description" content="{{ page.summary|striptags if page.summary else DESCRIPTION }}">
    {% else %}
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ SITENAME }}">
    <meta property="og:url" content="{{ SITEURL }}/">
    <meta property="og:description" content="{{ DESCRIPTION }}">
    {% endif %}
    <meta property="og:image" content="{{ SITEURL }}/img/book-cover.jpg">

    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image">
    {% if article %}
    <meta name="twitter:title" content="{{ article.title }}">
    <meta name="twitter:description" content="{{ article.summary|striptags if article.summary else DESCRIPTION }}">
    {% elif page %}
    <meta name="twitter:title" content="{{ page.title }}">
    <meta name="twitter:description" content="{{ page.summary|striptags if page.summary else DESCRIPTION }}">
    {% else %}
    <meta name="twitter:title" content="{{ SITENAME }}">
    <meta name="twitter:description" content="{{ DESCRIPTION }}">
    {% endif %}
    <meta name="twitter:image" content="{{ SITEURL }}/img/book-cover.jpg">

    <!-- PicoCSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <!-- Site styles -->
    <link rel="stylesheet" href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/css/site.css">
    <!-- Pagefind CSS -->
    <link href="{{ SITEURL }}/pagefind/pagefind-ui.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/img/logo.ico">
</head>
<body id="page-top">
    <!-- Navigation -->
    <nav>
        <div class="container">
            <a href="{{ SITEURL }}/" class="sitename">Ski Traverse</a>
            <a href="{{ SITEURL }}/#contact" class="nav-contact">Contact</a>
        </div>
    </nav>

    <!-- Page Header -->
    {% if page or article %}
    <header>
        <div class="container">
            <h1>{{ page.title if page else article.title }}</h1>
            <div class="star-divider">
                <span class="star">‚ùÑ</span>
            </div>
        </div>
    </header>
    {% endif %}

    <!-- Content -->
    <main>
        <div class="container">
            {% block content %}{% endblock %}
        </div>
        
        {% include 'contact.html' %}

    </main>

    <!-- Footer -->
    <footer>
        <div class="container" style="text-align: center; width: 100%; margin: 0 auto;">
            <div style="margin-bottom: 1rem; text-align: center;">
                <img src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/img/logo.svg" alt="{{ SITENAME }}" style="max-width: 80px; margin-bottom: 0.5rem;">
                <h4 style="margin: 0.5rem 0; text-align: center;">{{ SITENAME }}</h4>
                <p style="margin: 0.25rem 0; text-align: center;"><small>{{ LOCATION | safe }}</small></p>
            </div>
            <p style="margin: 0.5rem 0; text-align: center;">Opening eyes to the beauty of winter landscape, safely</p>
            <p style="margin: 0.5rem 0; text-align: center;">
                <a href="{{ SITEURL }}/info/impressum/">Impressum</a> | 
                <a href="{{ SITEURL }}/info/disclaimer/">Disclaimer</a>
            </p>
            <p style="margin: 0.25rem 0; text-align: center;"><small>Copyright &copy; {{ AUTHOR }} 2025</small></p>
        </div>
    </footer>

    <!-- Pagefind JS -->
    <script src="{{ SITEURL }}/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search-widget", showSubResults: true });
            
            // Wrap tables in scrollable container for mobile only
            if (window.innerWidth <= 768) {
                const tables = document.querySelectorAll('table:not(.table-wrapper table)');
                tables.forEach(table => {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'table-wrapper';
                    table.parentNode.insertBefore(wrapper, table);
                    wrapper.appendChild(table);
                });
            }
        });
    </script>
</body>
</html>
